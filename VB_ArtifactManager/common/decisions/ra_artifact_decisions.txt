repair_artifacts = {
    picture = "gfx/interface/illustrations/decisions/decision_smith.dds"

    ai_goal = no
    ai_check_interval = 0

    cooldown = { months = 12 }
    sort_order = 101

    is_shown = {
        any_character_artifact = {
            count >= 1
        }
    }
    
    is_valid_showing_failures_only = {
        employs_court_position = antiquarian_court_position
        custom_description = {
            text = "at_least_one_artifact_needs_repair_desc"
            any_character_artifact = {
                artifact_durability < artifact_max_durability
            }
        }
    }

    confirm_text = {
        first_valid = {
            triggered_desc = {
                trigger = {
                    employs_court_position = antiquarian_court_position
                }
                desc = repair_all_summon_antiquarian
            }
            triggered_desc =  {
                trigger = { always = yes }
                desc = repair_all_employ_suggestion
            }
        }
    }

    effect = {
        random_court_position_holder = {
            type = antiquarian_court_position
            save_scope_as = antiquarian
        }

        set_variable = {
            name = repair_artifacts_total_cost
            value = 0
        }
        set_variable = {
            name = repair_artifacts_extra_cost
            value = 0
        }
        set_variable = {
            name = repair_artifacts_extra_total_cost
            value = 0
        }

        every_character_artifact = {
            limit = {
                artifact_durability < artifact_max_durability
            }
            save_scope_as = artifact
            prev = {
                change_variable = {
                    name = repair_artifacts_total_cost
                    add = scope:artifact.repair_artifact_cost
                }
            }
        }

        change_variable = {
            name = repair_artifacts_extra_cost
            add = var:repair_artifacts_total_cost
        }
        change_variable = {
            name = repair_artifacts_extra_cost
            multiply = 0.10
        }
        clamp_variable = {
            name = repair_artifacts_extra_cost
            max = 50
            min = 1
        }
        change_variable = {
            name = repair_artifacts_extra_total_cost
            add = var:repair_artifacts_extra_cost
        }
        change_variable = {
            name = repair_artifacts_extra_total_cost
            add = var:repair_artifacts_total_cost
        }

        trigger_event = repair_artifacts.1
    }
}