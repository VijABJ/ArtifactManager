namespace = repair_artifacts

repair_artifacts.1 = {
    type = character_event
    title = repair_artifacts.1.t
    desc = repair_artifacts.1.d

    theme = court

    left_portrait = {
        character = ROOT
    }

    right_portrait = {
        character = scope:antiquarian
        animation = personality_rational
    }

    option = {
        name = repair_artifacts.1.a
        trigger = {
            short_term_gold >= var:repair_artifacts_total_cost
        }
        show_as_unavailable = {
            short_term_gold < var:repair_artifacts_total_cost
        }

        custom_label = {
            text = "repair_artifacts_effect_desc"
            every_character_artifact = {
                add_durability = artifact_durability
            }
        }
        
        remove_short_term_gold = var:repair_artifacts_total_cost

        remove_variable = repair_artifacts_total_cost
        remove_variable = repair_artifacts_extra_cost
        remove_variable = repair_artifacts_extra_total_cost
    }

    option = {
        name = repair_artifacts.1.b

        trigger = {
            short_term_gold >= var:repair_artifacts_extra_total_cost
        }
        show_as_unavailable = {
            short_term_gold < var:repair_artifacts_extra_total_cost
        }

        custom_label = {
            text = "repair_artifacts_effect_desc"
            every_character_artifact = {
                add_durability = artifact_durability
            }
        }

        remove_short_term_gold = var:repair_artifacts_total_cost
        pay_short_term_gold = {
            target = scope:antiquarian
            gold = var:repair_artifacts_extra_cost
        }

        add_opinion = {
            target = scope:antiquarian
            modifier = pleased_opinion
            opinion = 15
        }

        stress_impact = {
            greedy = medium_stress_impact_gain
            generous = minor_stress_impact_loss
        }

        remove_variable = repair_artifacts_total_cost
        remove_variable = repair_artifacts_extra_cost
        remove_variable = repair_artifacts_extra_total_cost
    }

    option = {
        name = repair_artifacts.1.c
        remove_decision_cooldown = repair_artifacts
    }
}